type: grid
cards:
  - type: heading
    heading: Stubbe
    heading_style: title
  - type: custom:simple-swipe-card
    show_pagination: false
    auto_hide_pagination: 0
    auto_height: false
    loop_mode: infinite
    enable_reset_after: true
    cards:
      - show_name: false
        show_icon: false
        show_state: true
        type: glance
        entities:
          - entity: >-
              sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature
            hold_action:
              action: perform-action
              perform_action: input_select.select_option
              target:
                entity_id: input_select.heating_schedule_stubbe
              data:
                option: Holiday
            icon_hold_action:
              action: perform-action
              perform_action: input_select.select_option
              target:
                entity_id: input_select.heating_schedule_stubbe
              data:
                option: Holiday
            card_mod:
              style: |
                :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                          color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    color: yellow; 
                  {% else %}
                    color: #90D5FF; 
                  {% endif %}
                }
          - entity: sensor.heating_circuit_5_stubbe_valve_position
            hold_action:
              action: perform-action
              perform_action: input_select.select_option
              target:
                entity_id: input_select.heating_schedule_stubbe
              data:
                option: Party
            icon_hold_action:
              action: perform-action
              perform_action: input_select.select_option
              target:
                entity_id: input_select.heating_schedule_stubbe
              data:
                option: Party
            card_mod:
              style: |
                :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                          color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    color: yellow; 
                  {% else %}
                    color: #90D5FF; 
                  {% endif %}
                }
          - entity: >-
              sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_humidity
            hold_action:
              action: perform-action
              perform_action: input_select.select_option
              target:
                entity_id: input_select.heating_schedule_stubbe
              data:
                option: Temporary
            icon_hold_action:
              action: perform-action
              perform_action: input_select.select_option
              target:
                entity_id: input_select.heating_schedule_stubbe
              data:
                option: Temporary
            card_mod:
              style: |
                :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                          color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    color: yellow; 
                  {% else %}
                    color: #90D5FF; 
                  {% endif %}
                }
            show_last_changed: false
        grid_options:
          columns: 12
          rows: 1
      - show_name: false
        show_icon: false
        show_state: true
        type: glance
        entities:
          - entity: input_text.next_event_stubbe
            card_mod:
              style: |
                :host {
                  {% if 'Heating stops' in states('input_text.next_event_stubbe') %}
                    color: #FF4500; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %}
                    color: gray; 
                  {% elif 'Calculating' in states('input_text.next_event_stubbe') %}
                    color: ; 
                  {% elif 'Heating starts' in states('input_text.next_event_stubbe') %}
                    color: lightgreen;
                  {% else %}
                    color: #90D5FF;
                  {% endif %}
                }
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.boost_enabled_stubbe
            name: Boost
            card_mod:
              style: |
                :host {
                      {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                            states('input_select.heating_mode') == 'aus' %}
                        --card-mod-icon-color: #4169E1; 
                      {% elif 'No' in states('input_text.next_event_stubbe') %} 
                        --card-mod-icon-color: gray; 
                      {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                        --card-mod-icon-color: #FF4500;
                      {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              states('input_select.heating_mode') == 'aus' %}
                        --card-mod-icon-color: violet; 
                      {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                        --card-mod-icon-color: orange; 
                      {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              states('input_select.heating_mode') == 'automatik' %}
                        --card-mod-icon-color: lightgreen; 
                      {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                              states('input_number.target_temp_stubbe') | float > 18 %}
                        --card-mod-icon-color: yellow; 
                      {% else %}
                        --card-mod-icon-color: #90D5FF; 
                      {% endif %}
                    }
            tap_action:
              action: toggle
          - type: markdown
            content: >

              {% set boost_val = state_attr('binary_sensor.boost_status_stubbe',
              'boost') | float(0) %} {% if
              is_state('binary_sensor.boost_status_stubbe', 'on') %}
                <center>{{ boost_val }} °C</center>
              {% else %}
               <center> 0 °C</center>
              {% endif %}
            card_mod:
              style: |
                ha-card {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                          color: lightgreen; 
                  {% elif states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    color: yellow; 
                  {% else %}
                    color: #90D5FF; 
                  {% endif %}
                } 
      - type: horizontal-stack
        cards:
          - type: tile
            entity: input_number.sun_compensation_stubbe
            name: Sun compensation
            tap_action:
              action: perform-action
              perform_action: input_number.increment
              target:
                entity_id: input_number.sun_compensation_stubbe
            icon_tap_action:
              action: perform-action
              perform_action: input_number.decrement
              target:
                entity_id: input_number.sun_compensation_stubbe
            card_mod:
              style: |
                :host {
                      {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                            states('input_select.heating_mode') == 'aus' %}
                        --card-mod-icon-color: #4169E1; 
                      {% elif 'No' in states('input_text.next_event_stubbe') %} 
                        --card-mod-icon-color: gray; 
                      {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                        --card-mod-icon-color: #FF4500;
                      {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              states('input_select.heating_mode') == 'aus' %}
                        --card-mod-icon-color: violet; 
                      {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                        --card-mod-icon-color: orange; 
                      {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                              states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                              states('input_select.heating_mode') == 'automatik' %}
                        --card-mod-icon-color: lightgreen; 
                      {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                              states('input_number.target_temp_stubbe') | float > 18 %}
                        --card-mod-icon-color: yellow; 
                      {% else %}
                        --card-mod-icon-color: #90D5FF; 
                      {% endif %}
                    }
          - type: markdown
            content: >
              {% set comp_val =
              state_attr('binary_sensor.sun_compensation_stubbe',
              'compensation') | float(0) %} {% if
              is_state('binary_sensor.sun_compensation_stubbe', 'on') %}
                <center>{{ comp_val }} °C</center>
              {% else %}
                <center>0 °C</center>
              {% endif %}
            card_mod:
              style: |
                ha-card {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                          color: lightgreen; 
                  {% elif states('sensor.temperature_and_humidity_sensor_blue_room_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    color: yellow; 
                  {% else %}
                    color: #90D5FF; 
                  {% endif %}
                } 
  - type: custom:simple-swipe-card
    show_pagination: false
    auto_hide_pagination: 0
    auto_height: false
    loop_mode: infinite
    enable_reset_after: true
    cards:
      - type: tile
        name: Target temp
        entity: input_number.target_temp_stubbe
        vertical: false
        hold_action:
          action: perform-action
          perform_action: script.heating_plus_input_number
          data:
            entity: input_number.target_temp_stubbe
        icon_hold_action:
          action: perform-action
          perform_action: script.heating_minus_input_number
          data:
            entity: input_number.target_temp_stubbe
        tap_action:
          action: perform-action
          perform_action: input_number.increment
          target:
            entity_id: input_number.target_temp_stubbe
        icon_tap_action:
          action: perform-action
          perform_action: input_number.decrement
          target:
            entity_id: input_number.target_temp_stubbe
          data: {}
        features_position: bottom
        card_mod:
          style: |
            :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    --card-mod-icon-color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                    --card-mod-icon-color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    --card-mod-icon-color: yellow; 
                  {% else %}
                    --card-mod-icon-color: #90D5FF; 
                  {% endif %}
                }
      - type: tile
        name: Δ heating
        entity: input_number.delta_temp_stubbe
        vertical: false
        hold_action:
          action: perform-action
          perform_action: script.heating_delta_plus_input_number
          data:
            entity: input_number.delta_temp_stubbe
        icon_hold_action:
          action: perform-action
          perform_action: script.heating_delta_minus_input_number
          data:
            entity: input_number.delta_temp_stubbe
        tap_action:
          action: perform-action
          perform_action: input_number.increment
          target:
            entity_id: input_number.delta_temp_stubbe
        icon_tap_action:
          action: perform-action
          perform_action: input_number.decrement
          target:
            entity_id: input_number.delta_temp_stubbe
          data: {}
        features_position: bottom
        card_mod:
          style: |
            :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    --card-mod-icon-color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                    --card-mod-icon-color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    --card-mod-icon-color: yellow; 
                  {% else %}
                    --card-mod-icon-color: #90D5FF; 
                  {% endif %}
                }
      - type: tile
        name: Base temp
        entity: input_number.base_temp_stubbe
        vertical: false
        hold_action:
          action: perform-action
          perform_action: script.heating_plus_input_number
          data:
            entity: input_number.base_temp_stubbe
        icon_hold_action:
          action: perform-action
          perform_action: script.heating_minus_input_number
          data:
            entity: input_number.base_temp_stubbe
        tap_action:
          action: perform-action
          perform_action: input_number.increment
          target:
            entity_id: input_number.base_temp_stubbe
        icon_tap_action:
          action: perform-action
          perform_action: input_number.decrement
          target:
            entity_id: input_number.base_temp_stubbe
          data: {}
        features_position: bottom
        card_mod:
          style: |
            :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    --card-mod-icon-color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                    --card-mod-icon-color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    --card-mod-icon-color: yellow; 
                  {% else %}
                    --card-mod-icon-color: #90D5FF; 
                  {% endif %}
                }
      - type: tile
        name: Heat temp
        entity: input_number.heat_temp_stubbe
        vertical: false
        hold_action:
          action: perform-action
          perform_action: script.heating_plus_input_number
          data:
            entity: input_number.heat_temp_stubbe
        icon_hold_action:
          action: perform-action
          perform_action: script.heating_minus_input_number
          data:
            entity: input_number.heat_temp_stubbe
        tap_action:
          action: perform-action
          perform_action: input_number.increment
          target:
            entity_id: input_number.heat_temp_stubbe
        icon_tap_action:
          action: perform-action
          perform_action: input_number.decrement
          target:
            entity_id: input_number.heat_temp_stubbe
          data: {}
        features_position: bottom
        card_mod:
          style: |
            :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    --card-mod-icon-color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                    --card-mod-icon-color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    --card-mod-icon-color: yellow; 
                  {% else %}
                    --card-mod-icon-color: #90D5FF; 
                  {% endif %}
                }
    grid_options:
      columns: 6
      rows: auto
  - type: custom:simple-swipe-card
    swipe_effect: instant
    show_pagination: false
    auto_hide_pagination: 0
    auto_height: false
    loop_mode: infinite
    enable_reset_after: true
    reset_after_timeout: 10000
    cards:
      - type: tile
        name: Schedule
        entity: input_select.heating_schedule_stubbe
        vertical: false
        hold_action:
          action: perform-action
          perform_action: script.heating_switch_schedules
          data:
            room: stubbe
        icon_hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Standard
        tap_action:
          action: perform-action
          perform_action: input_select.select_next
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            cycle: true
        icon_tap_action:
          action: perform-action
          perform_action: input_select.select_previous
          target:
            entity_id: input_select.heating_schedule_stubbe
          data: {}
        features_position: bottom
        card_mod:
          style: |
            :host {
                  {% if states('input_boolean.heating_claim_stubbe') == 'off' and 
                        states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: #4169E1; 
                  {% elif 'No' in states('input_text.next_event_stubbe') %} 
                    --card-mod-icon-color: gray; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: #FF4500;
                  {% elif states('input_boolean.heating_claim_stubbe') == 'on' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'aus' %}
                    --card-mod-icon-color: violet; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          (states('input_select.heating_mode') == 'Heating' or states('input_select.heating_mode') == 'Party') %}
                    --card-mod-icon-color: orange; 
                  {% elif states('input_boolean.heating_claim_stubbe') == 'off' and 
                          states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float < states('input_number.target_temp_stubbe') | float - 0.5 and 
                          states('input_select.heating_mode') == 'automatik' %}
                    --card-mod-icon-color: lightgreen; 
                  {% elif states('sensor.wall_thermostat_with_switching_output_for_brand_switches_stubbe_temperature') | float >= states('input_number.target_temp_stubbe') | float - 0.5 and
                          states('input_number.target_temp_stubbe') | float > 18 %}
                    --card-mod-icon-color: yellow; 
                  {% else %}
                    --card-mod-icon-color: #90D5FF; 
                  {% endif %}
                }
      - type: tile
        entity: schedule.standard_stubbe
        name: Standard
        show_entity_picture: true
        hide_state: true
        vertical: false
        hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Standard
        icon_hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Standard
        features_position: bottom
        card_mod:
          style: |
            :host {
              {% if states('input_select.heating_schedule_stubbe') == 'Standard' %}
                --card-mod-icon-color: lightgreen;
                font-size: 100px;
              {% else %}
                --card-mod-icon-color: gray;
                font-size: 100px;
              {% endif %}
            }
      - type: tile
        entity: schedule.holiday_stubbe
        name: Holiday
        show_entity_picture: true
        hide_state: true
        vertical: false
        hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Holiday
        icon_hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Holiday
        features_position: bottom
        card_mod:
          style: |
            :host {
              {% if states('input_select.heating_schedule_stubbe') == 'Holiday' %}
                --card-mod-icon-color: lightgreen;
                font-size: 100px;
              {% else %}
                --card-mod-icon-color: gray;
                font-size: 100px;
              {% endif %}
            }
      - type: tile
        entity: schedule.party_stubbe
        name: Party
        show_entity_picture: true
        hide_state: true
        vertical: false
        hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Party
        icon_hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Party
        features_position: bottom
        card_mod:
          style: |
            :host {
              {% if states('input_select.heating_schedule_stubbe') == 'Party' %}
                --card-mod-icon-color: lightgreen;
                font-size: 100px;
              {% else %}
                --card-mod-icon-color: gray;
                font-size: 100px;
              {% endif %}
            }
      - type: tile
        entity: schedule.temp_stubbe
        name: Temporary
        show_entity_picture: true
        hide_state: true
        vertical: false
        hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Temporary
        icon_hold_action:
          action: perform-action
          perform_action: input_select.select_option
          target:
            entity_id: input_select.heating_schedule_stubbe
          data:
            option: Temporary
        features_position: bottom
        card_mod:
          style: |
            :host {
              {% if states('input_select.heating_schedule_stubbe') == 'Temporary' %}
                --card-mod-icon-color: lightgreen;
                font-size: 100px;
              {% else %}
                --card-mod-icon-color: gray;
                font-size: 100px;
              {% endif %}
            }
    grid_options:
      columns: 6
      rows: 1
